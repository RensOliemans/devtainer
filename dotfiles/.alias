export EDITOR=nvim

# alias vim=nvim
alias cat=bat
alias new-post=~/git/waylonwalkerv2/new-post
alias np=~/git/waylonwalkerv2/new-post
alias pid="ps -aux | grep -v grep | grep "
alias upload="chrome.exe https://github.com/WaylonWalker/images.waylonwalker.com/upload/main/static"

alias ta="tmux attach"
switch_session() {
  local -r fmt='#{session_id}:|#S|(#{session_attached} attached)'
  { tmux display-message -p -F "$fmt" && tmux list-sessions -F "$fmt"; } \
    | awk '!seen[$1]++' \
    | column -t -s'|' \
    | fzf -q '$' --reverse --prompt 'switch session: ' -1 \
    | cut -d':' -f1 \
    | xargs tmux switch-client -t
}


vim () { 
  in_tmux \
    && nvim \
    || bash -c "\
    tmux new-session -d;\
    tmux send-keys nvim Space +GFiles C-m;\
    tmux -2 attach-session -d;
    "
  }


in_tmux () {
  if [ -n "$TMUX" ]; then
    return 0
  else
    return 1
  fi
}


wup () {
  cd ~/git/waylonwalkerv2/
  gatsby develop
}

ep () {
    _dir=$(pwd)
    _ep () {
        cd ~/git/waylonwalkerv2/
        nvim $(find ~/git/waylonwalkerv2/src/pages/ | grep .md$ | fzf)
    }
    _ep && cd $_dir || cd $_dir
}

lsn () {
    if [ -z $1 ]
        then
            ls -laht | head -n 10
        else
            ls -laht | head -n $1
    fi
}

alias ignore='curl https://www.gitignore.io/api/vim,node,data,emacs,python,pycharm,executable,sublimetext,visualstudio,visualstudiocode > .gitignore'

alias todo='cd ~/work/todo && nvim -O backlog.md doing.md done.md'

a () {
    source activate "$(conda info --envs | fzf --prompt select-env‚ùØ | awk '{print $1}')"
    }

fs() {
local -r fmt='#{session_id}:|#S|(#{session_attached} attached)'
{ tmux display-message -p -F "$fmt" && tmux list-sessions -F "$fmt"; } \
  | awk '!seen[$1]++' \
  | column -t -s'|' \
  | fzf -q '$' --reverse --prompt 'switch session: ' -1 \
  | cut -d':' -f1 \
  | xargs tmux switch-client -t
}


